import{a as E,S,i as n}from"./assets/vendor-LK6CqzKq.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const g of a.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&i(g)}).observe(document,{childList:!0,subtree:!0});function r(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(t){if(t.ep)return;t.ep=!0;const a=r(t);fetch(t.href,a)}})();const B="https://pixabay.com/api/",P="51504630-db9fa299e862fff98d3dacf4e";async function h(s,e=1){var r;try{return(await E.get(B,{params:{key:P,q:s,image_type:"photo",orientation:"horizontal",safesearch:!0,page:e,per_page:15}})).data}catch(i){throw console.error("Pixabay API error:",((r=i.response)==null?void 0:r.data)||i.message),new Error("Failed to fetch images")}}const v=document.querySelector(".gallery"),u=document.querySelector(".loader"),m=document.querySelector(".load-more-btn"),q=new S(".gallery a");function y(s){const e=s.map(r=>`
    <a href="${r.largeImageURL}" class="photo-card">
      <img src="${r.webformatURL}" alt="${r.tags}" loading="lazy" />
      <div class="info">
        <p><b>Likes:</b> ${r.likes}</p>
        <p><b>Views:</b> ${r.views}</p>
        <p><b>Comments:</b> ${r.comments}</p>
        <p><b>Downloads:</b> ${r.downloads}</p>
      </div>
    </a>
  `).join("");v.insertAdjacentHTML("beforeend",e),q.refresh()}function $(){v.innerHTML=""}function b(){u&&u.classList.add("visible")}function l(){u&&u.classList.remove("visible")}function x(){m&&m.classList.add("visible")}function p(){m&&m.classList.remove("visible")}let o=1,d="",c=0,f=!1,L=!1;const M=document.querySelector("form"),w=document.querySelector(".load-more-btn");M.addEventListener("submit",async s=>{if(s.preventDefault(),d=s.target.elements["search-text"].value.trim(),!!d){o=1,L=!1,$(),p(),b();try{const e=await h(d,o);if(c=e.totalHits,e.hits.length===0){n.info({message:"No images found. Try another search."}),l();return}y(e.hits),l(),c>15}catch{n.error({message:"Error loading images. Please try again."}),l()}}});w.addEventListener("click",async()=>{o+=1,p(),n.info({message:"Loading images, please wait.",position:"bottomCenter",timeout:2e3,progressBar:!1,close:!1}),b();try{const s=await h(d,o);y(s.hits),l(),o===2&&c>o*15&&(w.textContent="Scroll to load more",x()),o>=3&&(L=!0,p()),o*15>=c&&n.info({message:"You've reached the end of search results."});const{height:e}=document.querySelector(".gallery").firstElementChild.getBoundingClientRect();window.scrollBy({top:e*2,behavior:"smooth"})}catch{n.error({message:"Error loading more images."}),l()}});window.addEventListener("scroll",async()=>{if(!L||f)return;const{scrollTop:s,scrollHeight:e,clientHeight:r}=document.documentElement;if(s+r>=e-5){if(o*15>=c)return;o+=1,f=!0,n.info({message:"Loading images, please wait.",position:"bottomCenter",timeout:2e3,progressBar:!1,close:!1}),b();try{const i=await h(d,o);y(i.hits),l(),f=!1,o*15>=c&&n.info({message:"You've reached the end of search results."})}catch{n.error({message:"Error loading more images."}),l(),f=!1}}});
//# sourceMappingURL=index.js.map
