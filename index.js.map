{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\n\nimport axios from 'axios';\n\nconst API_KEY = '51504630-db9fa299e862fff98d3dacf4e';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet currentPage = 1;\nlet currentQuery = '';\nconst PER_PAGE = 15;\n\nexport async function fetchImages(query) {\n  if (query !== currentQuery) {\n    currentPage = 1;\n    currentQuery = query;\n  }\n\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: PER_PAGE,\n      },\n    });\n\n    const { hits, totalHits } = response.data;\n    const isLastPage = currentPage * PER_PAGE >= totalHits;\n\n    currentPage++;\n    return { hits, isLastPage };\n  } catch (error) {\n    console.error('âŒ Error fetching images:', error.message);\n    throw error;\n  }\n}\n\nexport function resetPage() {\n  currentPage = 1;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function showLoader() {\n  document.querySelector('.loader').style.display = 'block';\n}\n\nexport function hideLoader() {\n  document.querySelector('.loader').style.display = 'none';\n}\n\n\nexport function createGallery(images) {\n  if (!galleryContainer) return;\n\n  const markup = images.map(image => `\n    <li class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <p><b>Likes:</b> ${image.likes}</p>\n        <p><b>Views:</b> ${image.views}</p>\n        <p><b>Comments:</b> ${image.comments}</p>\n        <p><b>Downloads:</b> ${image.downloads}</p>\n      </div>\n    </li>\n  `).join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  if (!galleryContainer) return;\n  galleryContainer.innerHTML = '';\n}\n","import { fetchImages, resetPage } from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst input = form.elements['search-text'];\nconst loadMoreBtn = document.querySelector('.load-more');\nlet currentQuery = '';\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  const query = input.value.trim();\n  if (!query) {\n    iziToast.warning({ title: 'Oops', message: 'Please enter a search term!', position: 'topRight' });\n    return;\n  }\n\n  currentQuery = query;\n  resetPage();\n  clearGallery();\n  loadMoreBtn.classList.add('hidden');\n  showLoader();\n\n  try {\n    const { hits, isLastPage } = await fetchImages(currentQuery);\n    hideLoader();\n\n    if (hits.length === 0) {\n      iziToast.error({ title: 'No Results', message: 'Try another word!', position: 'topRight' });\n      return;\n    }\n\n    createGallery(hits);\n\n    if (isLastPage) {\n      iziToast.info({ title: 'End', message: `You've reached the end of search results.`, position: 'topRight' });\n    } else {\n      loadMoreBtn.classList.remove('hidden');\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({ title: 'Error', message: 'Something went wrong...', position: 'topRight' });\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  showLoader();\n\n  try {\n    const { hits, isLastPage } = await fetchImages(currentQuery);\n    hideLoader();\n\n    createGallery(hits);\n    scrollPage();\n\n    if (isLastPage) {\n      loadMoreBtn.classList.add('hidden');\n      iziToast.info({ title: 'End', message: `You've reached the end of search results.`, position: 'topRight' });\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({ title: 'Error', message: 'Could not load more images.', position: 'topRight' });\n  }\n});\n\nfunction scrollPage() {\n  const cardHeight = document.querySelector('.gallery-item')?.getBoundingClientRect().height || 0;\n  window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n}\n"],"names":["API_KEY","BASE_URL","currentPage","currentQuery","PER_PAGE","fetchImages","query","response","axios","hits","totalHits","isLastPage","error","resetPage","galleryContainer","lightbox","SimpleLightbox","showLoader","hideLoader","createGallery","images","markup","image","clearGallery","form","input","loadMoreBtn","e","iziToast","scrollPage","cardHeight","_a"],"mappings":"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"}