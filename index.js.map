{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '51504630-db9fa299e862fff98d3dacf4e';\n\nexport async function getImagesByQuery(query, page) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: 15\n      }\n    });\n\n    return response.data;\n  } catch (error) {\n    throw new Error('Failed to fetch images');\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('#load-more');\nconst loader = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function createGallery(images) {\n  const markup = images.map(image => `\n    <li class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <p><b>Likes:</b> ${image.likes}</p>\n        <p><b>Views:</b> ${image.views}</p>\n        <p><b>Comments:</b> ${image.comments}</p>\n        <p><b>Downloads:</b> ${image.downloads}</p>\n      </div>\n    </li>\n  `).join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryContainer.innerHTML = '';\n}\n\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('hidden');\n}\n","import { getImagesByQuery } from './js/pixabay-api.js';\n\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton\n} from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('form');\nconst input = document.querySelector('input');\nconst loadMoreBtn = document.querySelector('#load-more');\n\nlet query = '';\nlet page = 1;\nlet totalPages = 0;\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  query = input.value.trim();\n  page = 1;\n\n  if (query === '') {\n    iziToast.error({ message: 'Please enter a search term' });\n    return;\n  }\n\n  clearGallery();\n  hideLoadMoreButton();\n  // ❌ Не показуємо лоадер при першому запиті\n\n  try {\n    const data = await getImagesByQuery(query, page);\n    hideLoader(); // на випадок, якщо залишився\n\n    if (data.totalHits === 0) {\n      iziToast.error({ message: 'No images found' });\n      return;\n    }\n\n    createGallery(data.hits);\n    iziToast.success({ message: `Hooray! We found ${data.totalHits} images` });\n\n    totalPages = Math.ceil(data.totalHits / 15);\n    if (page < totalPages) showLoadMoreButton();\n    else iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n  } catch (error) {\n    hideLoader();\n    iziToast.error({ message: 'Error loading images' });\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page++;\n  showLoader(); // ✅ Показуємо лоадер тільки при натисканні на кнопку\n\n  try {\n    const data = await getImagesByQuery(query, page);\n    hideLoader();\n    createGallery(data.hits);\n    scrollGallery();\n\n    if (page >= totalPages) {\n      hideLoadMoreButton();\n      iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n    }\n  } catch {\n    hideLoader();\n    iziToast.error({ message: 'Failed to load more images' });\n  }\n});\n\nfunction scrollGallery() {\n  const card = document.querySelector('.gallery-item');\n  if (!card) return;\n\n  const height = card.getBoundingClientRect().height;\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth'\n  });\n}\n"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","axios","galleryContainer","loadMoreBtn","loader","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","totalPages","e","iziToast","data","scrollGallery","card","height"],"mappings":"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"}