{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '51504630-db9fa299e862fff98d3dacf4e';\n\nexport async function fetchFromPixabay(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: 15\n      }\n    });\n\n    return response.data;\n  } catch (error) {\n    console.error('Pixabay API error:', error.response?.data || error.message);\n    throw new Error('Failed to fetch images');\n  }\n}\n","\nimport { fetchFromPixabay } from './js/pixabay-api.js';\nlet currentPage = 1;\nlet currentQuery = '';\n\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst loader = document.querySelector('.loader');\n\nasync function fetchImages(query, page = 1) {\n  toggleLoading(page);\n\n  try {\n    const response = await fetchFromPixabay(query, page); // твоя функція API\n\n    if (!response.hits || response.hits.length === 0) {\n      gallery.innerHTML = '<p>No images found. Try another search.</p>';\n      toggleLoading(null);\n      return;\n    }\n\n    renderImages(response.hits);\n    currentPage = page;\n    toggleLoading(null); // приховати все після завантаження\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    gallery.innerHTML = '<p>Error loading images. Please try again.</p>';\n    toggleLoading(null);\n  }\n}\n\nfunction renderImages(images) {\n  const markup = images.map(img => `\n    <div class=\"photo-card\">\n      <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p><b>Likes:</b> ${img.likes}</p>\n        <p><b>Views:</b> ${img.views}</p>\n        <p><b>Comments:</b> ${img.comments}</p>\n        <p><b>Downloads:</b> ${img.downloads}</p>\n      </div>\n    </div>\n  `).join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction toggleLoading(page) {\n  if (page === 1) {\n    loadMoreBtn.style.display = 'none';\n    loader.style.display = 'none';\n  } else if (page === 2) {\n    loadMoreBtn.style.display = 'block';\n    loader.style.display = 'none';\n  } else if (page >= 3) {\n    loadMoreBtn.style.display = 'none';\n    loader.style.display = 'block';\n  }\n}\n\ndocument.querySelector('form').addEventListener('submit', e => {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  currentQuery = e.target.elements['search-text'].value.trim();\n  currentPage = 1;\n  fetchImages(currentQuery, currentPage);\n});\n\nloadMoreBtn.addEventListener('click', () => {\n  fetchImages(currentQuery, currentPage + 1);\n});\n"],"names":["BASE_URL","API_KEY","fetchFromPixabay","query","page","axios","error","_a","currentPage","currentQuery","gallery","loadMoreBtn","loader","fetchImages","toggleLoading","response","renderImages","images","markup","img","e"],"mappings":"svBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAET,eAAeC,EAAiBC,EAAOC,EAAO,EAAG,OACtD,GAAI,CAaF,OAZiB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACX,CACP,CAAK,GAEe,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,uBAAsBC,EAAAD,EAAM,WAAN,YAAAC,EAAgB,OAAQD,EAAM,OAAO,EACnE,IAAI,MAAM,wBAAwB,CACzC,CACH,CCtBA,IAAIE,EAAc,EACdC,EAAe,GAEnB,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAS,SAAS,cAAc,SAAS,EAE/C,eAAeC,EAAYV,EAAOC,EAAO,EAAG,CAC1CU,EAAcV,CAAI,EAElB,GAAI,CACF,MAAMW,EAAW,MAAMb,EAAiBC,EAAOC,CAAI,EAEnD,GAAI,CAACW,EAAS,MAAQA,EAAS,KAAK,SAAW,EAAG,CAChDL,EAAQ,UAAY,8CACpBI,EAAc,IAAI,EAClB,MACD,CAEDE,EAAaD,EAAS,IAAI,EAC1BP,EAAcJ,EACdU,EAAc,IAAI,CACnB,OAAQR,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CI,EAAQ,UAAY,iDACpBI,EAAc,IAAI,CACnB,CACH,CAEA,SAASE,EAAaC,EAAQ,CAC5B,MAAMC,EAASD,EAAO,IAAIE,GAAO;AAAA;AAAA,kBAEjBA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,2BAEzBA,EAAI,KAAK;AAAA,2BACTA,EAAI,KAAK;AAAA,8BACNA,EAAI,QAAQ;AAAA,+BACXA,EAAI,SAAS;AAAA;AAAA;AAAA,GAGzC,EAAE,KAAK,EAAE,EACVT,EAAQ,mBAAmB,YAAaQ,CAAM,CAChD,CAEA,SAASJ,EAAcV,EAAM,CACvBA,IAAS,GACXO,EAAY,MAAM,QAAU,OAC5BC,EAAO,MAAM,QAAU,QACdR,IAAS,GAClBO,EAAY,MAAM,QAAU,QAC5BC,EAAO,MAAM,QAAU,QACdR,GAAQ,IACjBO,EAAY,MAAM,QAAU,OAC5BC,EAAO,MAAM,QAAU,QAE3B,CAEA,SAAS,cAAc,MAAM,EAAE,iBAAiB,SAAUQ,GAAK,CAC7DA,EAAE,eAAc,EAChBV,EAAQ,UAAY,GACpBD,EAAeW,EAAE,OAAO,SAAS,aAAa,EAAE,MAAM,OACtDZ,EAAc,EACdK,EAAYJ,EAAcD,CAAW,CACvC,CAAC,EAEDG,EAAY,iBAAiB,QAAS,IAAM,CAC1CE,EAAYJ,EAAcD,EAAc,CAAC,CAC3C,CAAC"}